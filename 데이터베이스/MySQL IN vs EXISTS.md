# EXISTS vs IN 비교표

| 기준 | EXISTS | IN |
|------|--------|----|
| **기본 개념** | 논리 연산자 (TRUE/FALSE) | 값 비교 연산자 |
| **반환 조건** | 서브쿼리가 1개 이상 행 반환 | 값이 리스트에 포함되는지 |
| **실행 방식** | 첫 번째 매칭에서 중단 | 모든 결과 비교 |
| **NULL 처리** | ✅ NULL-safe | ❌ NULL 주의 필요 |
| **서브쿼리 타입** | 주로 상관 서브쿼리 | 상관/비상관 모두 가능 |
| **성능 일반론** | 대용량 + 인덱스 좋을 때 유리 | 작은 결과셋에서 유리 |

## 성능 비교표

| 시나리오 | EXISTS | IN | 권장 |
|----------|--------|----|------|
| **NOT 조건** | ⭐⭐⭐ 매우 빠름 | ⭐ 느림 | EXISTS |
| **대용량 데이터** | ⭐⭐⭐ 빠름 | ⭐⭐ 보통 | EXISTS |
| **작은 결과셋** | ⭐⭐ 보통 | ⭐⭐⭐ 매우 빠름 | IN |
| **고정 값 리스트** | 사용 어려움 | ⭐⭐⭐ 매우 빠름 | IN |
| **인덱스 없을 때** | ⭐ 느림 | ⭐⭐ 보통 | IN |
| **NULL 많은 데이터** | ⭐⭐⭐ 안전함 | ⭐ 위험 | EXISTS |

## 실행 계획 비교

| 항목 | EXISTS | IN |
|------|--------|----|
| **조인 방식** | Nested Loops | Hash/Merge 조인 |
| **서브쿼리 실행** | 행마다 실행 | 한 번 실행 |
| **메모리 사용** | 적음 | 많음 (결과셋 저장) |
| **최적화 가능성** | 제한적 | 다양함 |

## 사용 사례 비교

| 사용 사례 | EXISTS | IN | 이유 |
|-----------|--------|----|------|
| `NOT EXISTS` | ✅ 추천 | ❌ 비추천 | 성능, NULL 안전성 |
| 고정 리스트 비교 | ❌ 불가 | ✅ 추천 | 문법 적합성 |
| 작은 서브쿼리 | ⚠️ 가능 | ✅ 추천 | 성능 우위 |
| 대용량 + 인덱스 | ✅ 추천 | ⚠️ 가능 | 실행 방식 유리 |
| NULL 처리 중요 | ✅ 추천 | ❌ 비추천 | 안전성 |

## 문법 비교표

| 패턴 | EXISTS 예시 | IN 예시 |
|------|-------------|---------|
| **기본** | `WHERE EXISTS (SELECT 1...)` | `WHERE id IN (1,2,3)` |
| **NOT 조건** | `WHERE NOT EXISTS (...)` | `WHERE id NOT IN (...)` |
| **상관 서브쿼리** | `WHERE EXISTS (SELECT 1 FROM b WHERE b.id = a.id)` | `WHERE id IN (SELECT id FROM b)` |
| **NULL 처리** | 자동 처리 | `WHERE id IN (SELECT id FROM b WHERE id IS NOT NULL)` |

## 결론 매트릭스

| 우선순위 | 조건 | 선택 |
|----------|------|------|
| **1순위** | NOT 조건 사용 시 | ✅ EXISTS |
| **2순위** | 고정 값 리스트 | ✅ IN |
| **3순위** | 서브쿼리 결과 적음 | ✅ IN |
| **4순위** | 대용량 + 인덱스 좋음 | ✅ EXISTS |
| **5순위** | NULL 데이터 많음 | ✅ EXISTS |

**핵심**: "상황에 따라 다르므로, 실제 EXPLAIN으로 테스트하는 것이 최선"
