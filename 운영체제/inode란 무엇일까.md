## **inode란?**  
inode(아이노드, **Index Node**)는 **유닉스 및 리눅스 파일 시스템에서 파일의 메타데이터를 저장하는 자료구조**이다.  

일반적으로 파일을 관리할 때, 파일 이름을 기반으로 파일을 찾을 것 같지만, **유닉스 파일 시스템에서는 파일 이름이 아닌 inode 번호를 사용**하여 파일을 찾는다.  

---

## **1. inode의 역할**
inode는 파일 자체의 데이터를 저장하지 않으며, **파일의 속성과 데이터 블록의 위치 정보를 저장**하는 역할을 한다.  
파일의 실제 데이터는 **데이터 블록(Data Block)**에 저장되며, inode는 해당 데이터 블록의 위치를 가리킨다.  

---

## **2. inode가 저장하는 정보 (메타데이터)**  
inode는 파일 이름을 제외한 **파일에 대한 모든 정보(메타데이터)를 저장**한다.

| **항목** | **설명** |
|----------|----------------------------------|
| 파일 소유자 (UID) | 파일을 소유한 사용자 ID |
| 그룹 ID (GID) | 파일이 속한 그룹 ID |
| 파일 유형 | 일반 파일, 디렉터리, 심볼릭 링크 등 |
| 파일 크기 | 파일의 크기 (바이트 단위) |
| 파일 권한 (rwx) | 읽기, 쓰기, 실행 권한 |
| 하드 링크 수 | 동일한 inode를 참조하는 링크 개수 |
| 생성 시간 (ctime) | inode가 마지막으로 변경된 시간 |
| 수정 시간 (mtime) | 파일 내용이 마지막으로 수정된 시간 |
| 접근 시간 (atime) | 파일이 마지막으로 읽힌 시간 |
| 데이터 블록 위치 | 파일의 실제 데이터가 저장된 블록 주소 |

---

## **3. inode의 동작 방식**
파일이 생성되면 다음과 같은 과정으로 inode가 할당된다.

1. 새로운 파일을 생성하면 파일 시스템은 **빈 inode 번호를 할당**한다.
2. inode에 **파일의 메타데이터 정보(소유자, 크기, 권한 등)가 저장**된다.
3. inode는 **파일 데이터가 저장될 데이터 블록의 위치를 기록**한다.
4. 디렉터리는 **파일 이름과 inode 번호를 매핑**하여 저장한다.  
   즉, 디렉터리는 "파일 이름 → inode 번호"를 저장하고, inode는 데이터 블록을 가리킨다.

---

## **4. inode 확인 방법**
inode 번호를 확인하려면 `ls -i` 명령어를 사용한다.

```bash
ls -i file.txt
```
출력 예시:
```
123456 file.txt
```
여기서 `123456`이 inode 번호이다.

inode의 상세 정보를 보려면 `stat` 명령어를 사용한다.

```bash
stat file.txt
```
출력 예시:
```
  File: file.txt
  Size: 1024        Blocks: 8          IO Block: 4096   regular file
Device: 802h/2050d  Inode: 123456      Links: 1
Access: 2025-02-21 10:00:00
Modify: 2025-02-21 09:30:00
Change: 2025-02-21 09:30:05
```
여기서 `Inode: 123456`은 파일의 inode 번호를 나타낸다.

---

## **5. inode의 특징**
1. **파일 이름을 저장하지 않는다**  
   - inode는 **파일의 메타데이터를 저장**하지만 **파일 이름은 저장하지 않는다**.  
   - 파일 이름은 디렉터리에 따로 저장되며, inode는 파일의 실제 위치를 찾는 역할을 한다.
   
2. **하드 링크 (Hard Link)와 연관됨**  
   - 하드 링크는 **여러 개의 파일 이름이 같은 inode를 가리킬 수 있도록 하는 기능**이다.  
   - 즉, **서로 다른 이름을 가진 파일이 같은 inode를 공유할 수 있다**.  
   - 하드 링크는 inode 번호가 동일하다. (`ls -i`로 확인 가능)  

3. **소프트 링크 (심볼릭 링크)와 다름**  
   - 심볼릭 링크는 원본 파일의 **inode를 직접 참조하는 것이 아니라, 원본 파일의 경로를 저장**하는 방식이다.  
   - 즉, 원본 파일이 삭제되면 심볼릭 링크는 깨진 링크가 된다.  

4. **inode는 한 파일 시스템 내에서만 유효함**  
   - inode 번호는 파일 시스템마다 다르다.  
   - 파일을 다른 파일 시스템으로 이동하면 inode 번호가 변경된다.  

---

## **6. 하드 링크 vs 심볼릭 링크 (소프트 링크)**
| 항목 | 하드 링크 (Hard Link) | 심볼릭 링크 (Symbolic Link) |
|------|----------------------|--------------------------|
| inode 공유 여부 | ✅ 같은 inode 공유 | ❌ 다른 inode 사용 |
| 원본 파일 삭제 시 | 원본 삭제해도 유지 | 원본 삭제 시 깨진 링크 |
| 파일 시스템 간 이동 | ❌ 같은 파일 시스템 내에서만 가능 | ✅ 다른 파일 시스템에서도 가능 |
| 크기 | 원본 크기와 동일 | 몇 바이트(원본 경로만 저장) |

```bash
# 하드 링크 생성
ln file.txt hard_link.txt

# 심볼릭 링크 생성
ln -s file.txt soft_link.txt
```

---

## **7. inode와 파일 시스템 관리**
### **1) inode 개수 확인**
각 파일 시스템에는 사용할 수 있는 inode 개수가 정해져 있다.  
남은 inode 개수는 `df -i` 명령어로 확인할 수 있다.

```bash
df -i
```

출력 예시:
```
Filesystem      Inodes  IUsed  IFree IUse% Mounted on
/dev/sda1      1000000  20000 980000    2% /
```
여기서 `IFree` 값이 0이 되면, 데이터 블록이 남아 있어도 새로운 파일을 생성할 수 없다.

---

### **2) inode를 다 사용하면 발생하는 문제**
- 디스크 공간이 남아 있어도 새로운 파일을 생성할 수 없다.
- `No space left on device` 오류가 발생할 수 있다.
- 해결 방법:
  - 필요 없는 작은 파일을 삭제하여 inode를 확보한다.
  - 파일 시스템을 다시 포맷하여 inode 개수를 늘린다.

---

## **8. 정리**
### **inode란?**
inode는 **파일의 메타데이터와 데이터 블록의 위치 정보를 저장하는 자료구조**이다.  
유닉스 파일 시스템에서 파일을 찾을 때 **파일 이름이 아니라 inode 번호를 사용**하며,  
inode는 파일의 속성을 관리하고, 데이터 블록을 가리키는 역할을 한다.

### **inode의 주요 특징**
- 파일의 **이름은 저장하지 않음** (디렉터리가 관리)
- **파일의 메타데이터(권한, 크기, 소유자 등)를 저장**
- **하드 링크가 같은 inode를 공유할 수 있음**
- **파일 시스템마다 inode 개수가 제한됨**

### **inode 관련 명령어**
- `ls -i` → inode 번호 확인
- `stat file.txt` → inode 상세 정보 확인
- `df -i` → 사용 가능한 inode 개수 확인

**inode 개념을 이해하면, 파일 시스템의 구조를 효율적으로 관리할 수 있다!** 🚀
