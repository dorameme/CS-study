## **유닉스 파일 시스템 구조**  
유닉스의 파일 시스템은 디스크를 여러 개의 논리적 블록으로 나누고, 파일 및 디렉터리를 저장하는 구조로 설계되어 있다. 주요 구성 요소로 **부트 블록(Boot Block)**, **슈퍼 블록(Super Block)**, **inode 블록(Inode Block)**, **데이터 블록(Data Block)** 등이 있다.  

---

## **1. 유닉스 파일 시스템의 기본 구조**  
디스크는 다음과 같이 여러 영역으로 나뉜다.

1. **부트 블록(Boot Block)**
2. **슈퍼 블록(Super Block)**
3. **inode 블록(Inode Block)**
4. **데이터 블록(Data Block)**

---

## **2. 주요 블록 설명**

### **1) 부트 블록 (Boot Block)**
- **설명**:  
  - 파일 시스템의 **가장 첫 번째 영역**으로, 시스템 부팅 시 필요한 정보를 저장한다.
  - 운영체제가 부팅될 때 **부트 로더(Boot Loader)** 가 실행되며, 커널을 로드하는 역할을 한다.  
- **특징**:  
  - 파일 시스템마다 존재하지만, 파일 시스템이 마운트되는 동안에는 일반적으로 사용되지 않는다.
  - 운영체제에 따라 다르게 구성될 수 있다.  
- **예제**:  
  - 리눅스에서는 `GRUB` 같은 부트 로더가 부트 블록에 위치할 수 있다.  

---

### **2) 슈퍼 블록 (Super Block)**
- **설명**:  
  - 해당 파일 시스템의 **전체적인 메타데이터**를 관리하는 중요한 블록이다.
  - 파일 시스템의 크기, inode 개수, 데이터 블록 개수 등의 정보를 저장한다.  
- **저장 정보**:
  - 파일 시스템의 크기
  - 블록 크기
  - inode 개수
  - 데이터 블록 개수 및 사용 가능 여부
  - 마운트 정보 등  
- **예제**:  
  - 파일 시스템이 손상되었을 때, `fsck` 명령어를 이용하여 슈퍼 블록을 검사하고 복구할 수 있다.
  ```bash
  fsck -b 32768 /dev/sda1  # 슈퍼 블록이 손상되었을 때 백업된 슈퍼 블록을 사용하여 복구
  ```

---

### **3) inode 블록 (Inode Block)**
- **설명**:  
  - 파일의 메타데이터를 저장하는 블록이다.
  - 파일의 이름은 저장하지 않고, **파일의 속성 및 위치 정보를 저장**한다.
  - 파일을 찾기 위해서는 inode 번호를 통해 해당 파일의 데이터를 찾아야 한다.  
- **저장 정보**:
  - 파일 소유자 (UID, GID)
  - 파일 크기
  - 파일 유형 (일반 파일, 디렉터리, 소켓 등)
  - 파일 접근 권한 (rwx)
  - 타임스탬프 (생성 시간, 수정 시간, 접근 시간)
  - 데이터 블록의 위치 정보  
- **예제**:  
  - `ls -i` 명령어를 이용하여 inode 번호를 확인할 수 있다.
  ```bash
  ls -i file.txt  # 파일의 inode 번호 출력
  ```
  - `stat` 명령어를 이용하여 inode 정보를 확인할 수 있다.
  ```bash
  stat file.txt
  ```

---

### **4) 데이터 블록 (Data Block)**
- **설명**:  
  - 파일의 **실제 데이터**가 저장되는 블록이다.
  - inode에서 데이터 블록의 위치 정보를 가지고 있으며, 이를 통해 데이터를 찾는다.
  - 크기는 일반적으로 4KB~8KB 단위로 설정된다.  
- **특징**:  
  - 큰 파일의 경우 여러 개의 데이터 블록에 저장된다.
  - 작은 파일이 여러 개 저장될 경우, 공간 낭비가 발생할 수도 있다.  
- **예제**:
  - `df -h` 명령어를 이용하면 파일 시스템의 사용 가능한 데이터 블록 크기를 확인할 수 있다.
  ```bash
  df -h
  ```

---

## **3. 유닉스 파일 시스템의 동작 방식**
1. 사용자가 **파일을 생성**하면 파일 시스템은 **빈 inode 블록을 할당**하고, 메타데이터를 저장한다.
2. 파일 내용이 **데이터 블록에 저장**되고, 해당 데이터 블록의 위치가 inode에 기록된다.
3. 파일에 접근할 때, 시스템은 **inode 정보를 먼저 검색**한 후, 해당 데이터 블록을 찾아서 파일 내용을 반환한다.

---

## **4. 유닉스 파일 시스템 구조 예시**
유닉스 파일 시스템을 **시각적으로 표현**하면 다음과 같다.

```
[디스크]
├── 부트 블록 (Boot Block)   -> 시스템 부팅 정보 저장
├── 슈퍼 블록 (Super Block)  -> 파일 시스템 정보 저장
├── inode 블록 (Inode Block) -> 파일 메타데이터 저장
└── 데이터 블록 (Data Block) -> 실제 파일 데이터 저장
```

---

## **5. 정리**
| 블록 이름 | 역할 |
|-----------|--------------------------------------|
| **부트 블록** | 부팅 정보 저장 (부트 로더 포함) |
| **슈퍼 블록** | 파일 시스템의 전체적인 메타데이터 관리 |
| **inode 블록** | 파일의 메타데이터 및 데이터 블록 위치 저장 |
| **데이터 블록** | 실제 파일 내용 저장 |

유닉스 파일 시스템은 **inode를 통해 파일을 관리**하며, 데이터 블록과 분리된 구조를 갖기 때문에 **효율적인 파일 검색과 관리**가 가능하다.
